{"version":3,"sources":["game.js"],"names":["cc","Class","extends","Component","properties","labelPlayerATip","Label","labelPlayerANickName","spritePlayerAAvatar","Sprite","labelPlayerBTip","labelPlayerBNickName","spritePlayerBAvatar","start","onClickStopGame","roomManager","leave","director","loadScene","onRoomMessage","message","JSON","parse","event","data","dataManager","environment","twoPlayersInfo","renderPlayers","playerA","playerB","string","nickName","utils","renderAvatar","avatarUrl"],"mappings":";;;;;;;;AAAA;;;;AAEA;;;;AACA;;;;;;AAEAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,yBAAiBL,GAAGM,KADZ;AAERC,8BAAsBP,GAAGM,KAFjB;AAGRE,6BAAqBR,GAAGS,MAHhB;;AAKRC,yBAAiBV,GAAGM,KALZ;AAMRK,8BAAsBX,GAAGM,KANjB;AAORM,6BAAqBZ,GAAGS;AAPhB,KAHP;;AAaLI,SAbK,mBAaI,CAER,CAfI;AAiBLC,mBAjBK,6BAiBa;AACdC,+BAAYC,KAAZ;AACAhB,WAAGiB,QAAH,CAAYC,SAAZ,CAAsB,OAAtB;AACH,KApBI;AAsBLC,iBAtBK,yBAsBSC,OAtBT,EAsBkB;AACnB;AACA;AAFmB,0BAGKC,KAAKC,KAAL,CAAWF,OAAX,CAHL;AAAA,YAGXG,KAHW,eAGXA,KAHW;AAAA,YAGJC,IAHI,eAGJA,IAHI;;AAKnB,gBAAQD,KAAR;AACI,iBAAK,aAAL;AACIE,uCAAYC,WAAZ,GAA0BF,IAA1B;AACA;AACJ,iBAAK,MAAL;AACIC,uCAAYE,cAAZ,GAA6BH,IAA7B;AACA,qBAAKI,aAAL;AACA;AACJ,iBAAK,aAAL;AACI;AACJ,iBAAK,KAAL;AACI;AACJ;AACI;AAbR;AAeH,KA1CI;AA4CLA,iBA5CK,2BA4CW;AACZ,YAAIH,uBAAYE,cAAhB,EAAgC;AAAA,uDACCF,uBAAYE,cADb;AAAA,gBACpBE,OADoB;AAAA,gBACXC,OADW;;AAG5B,gBAAID,OAAJ,EAAa;AACT,qBAAKtB,oBAAL,CAA0BwB,MAA1B,GAAmCF,QAAQG,QAA3C;AACAC,gCAAMC,YAAN,CAAmB,KAAK1B,mBAAxB,EAA6CqB,QAAQM,SAArD;AACH;;AAED,gBAAIL,OAAJ,EAAa;AACT,qBAAKnB,oBAAL,CAA0BoB,MAA1B,GAAmCD,QAAQE,QAA3C;AACAC,gCAAMC,YAAN,CAAmB,KAAKtB,mBAAxB,EAA6CkB,QAAQK,SAArD;AACH;AACJ;AACJ;;AAED;;AA5DK,CAAT","file":"game.js","sourceRoot":"../../../../assets/scripts","sourcesContent":["import roomManager from './room_manager';\n\nimport utils from './utils';\nimport dataManager from './data_manager';\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        labelPlayerATip: cc.Label,\n        labelPlayerANickName: cc.Label,\n        spritePlayerAAvatar: cc.Sprite,\n\n        labelPlayerBTip: cc.Label,\n        labelPlayerBNickName: cc.Label,\n        spritePlayerBAvatar: cc.Sprite,\n    },\n\n    start () {\n\n    },\n\n    onClickStopGame() { \n        roomManager.leave();\n        cc.director.loadScene('start');\n    },\n\n    onRoomMessage(message) {\n        // NOTE: 消息体的内容是开发者自己定义的，这里的代码只是一种示例\n        // NOTE: 开发者可以根据自己的房间脚本和协议，实现自身游戏的逻辑\n        const { event, data } = JSON.parse(message);\n\n        switch (event) {\n            case 'environment':\n                dataManager.environment = data;\n                break;\n            case 'info':\n                dataManager.twoPlayersInfo = data;\n                this.renderPlayers();\n                break;\n            case 'server-time':\n                break;\n            case 'end':\n                break;\n            default:\n                break;\n        }\n    },\n\n    renderPlayers() {\n        if (dataManager.twoPlayersInfo) {\n            const [ playerA, playerB ] = dataManager.twoPlayersInfo;\n\n            if (playerA) {\n                this.labelPlayerANickName.string = playerA.nickName;\n                utils.renderAvatar(this.spritePlayerAAvatar, playerA.avatarUrl);\n            }\n\n            if (playerB) {\n                this.labelPlayerBNickName.string = playerB.nickName;\n                utils.renderAvatar(this.spritePlayerBAvatar, playerB.avatarUrl);\n            }\n        }\n    }\n\n    // update (dt) {},\n});\n"]}